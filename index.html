<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BIG ZONE + BIG BIN Barcode Stickers (70×30mm)</title>

  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #f0f0f0;
      font-family: Arial, sans-serif;
    }

    .container {
      max-width: 900px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    }

    textarea {
      width: 100%;
      height: 140px;
      padding: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #aaa;
      resize: vertical;
    }

    button {
      padding: 10px 18px;
      margin-top: 12px;
      border: none;
      border-radius: 6px;
      background: #0f172a;
      font-size: 14px;
      font-weight: bold;
      color: white;
      cursor: pointer;
    }

    #preview {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }

    .label {
      width: 290px;
      height: 125px;
      border: 1px dashed #ccc;
      background: white;
      display: flex;
      align-items: center;
      padding: 5px;
    }

    .left {
      width: 32%;
      text-align: center;
      border-right: 1px solid #ddd;
      padding-right: 8px;
    }

    .left-title {
      font-size: 15px;
      font-weight: 900;
    }

    .left-zone {
      font-size: 32px;      /* MUCH BIGGER */
      font-weight: 900;
      margin-top: 3px;
    }

    .right {
      width: 68%;
      text-align: center;
      padding-left: 8px;
    }

    .bin {
      font-size: 26px;      /* MUCH BIGGER */
      font-weight: 900;
      margin-bottom: 6px;
      letter-spacing: 0.04em;
    }

    .bar-prev {
      width: 100%;
      height: 40px;  /* slightly bigger barcode */
    }
  </style>
</head>
<body>

<div class="container">
  <h2>70 × 30 mm — EXTRA LARGE TEXT + BARCODE</h2>

  <textarea id="input" placeholder="A01 R01-001
A01 R01-002
B08 R05-010"></textarea>

  <button onclick="generate()">Generate Preview</button>
  <button id="downloadBtn" onclick="downloadPDF()" disabled>Download 70×30 PDF</button>

  <div id="preview"></div>
</div>

<script>
let labels = [];

function generate() {
  const lines = document.getElementById("input").value.trim().split("\n");
  labels = [];
  document.getElementById("preview").innerHTML = "";
  document.getElementById("downloadBtn").disabled = false;

  lines.forEach(line => {
    let parts = line.trim().split(/\s+/);
    if (parts.length < 2) return;

    let zone = parts[0];
    let bin = parts.slice(1).join(" ");

    labels.push({ zone, bin });

    let card = document.createElement("div");
    card.className = "label";

    let left = document.createElement("div");
    left.className = "left";
    left.innerHTML = `<div class='left-title'>Zone</div><div class='left-zone'>${zone}</div>`;

    let right = document.createElement("div");
    right.className = "right";
    right.innerHTML = `<div class='bin'>${bin}</div>`;

    let barcode = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    barcode.classList.add("bar-prev");
    right.appendChild(barcode);

    card.appendChild(left);
    card.appendChild(right);

    document.getElementById("preview").appendChild(card);

    JsBarcode(barcode, bin, {
      format: "CODE128",
      displayValue: false,
      width: 1.3,
      height: 40,
      margin: 0
    });
  });
}

async function downloadPDF() {
  const { jsPDF } = window.jspdf;

  const doc = new jsPDF({
    orientation: "landscape",
    unit: "mm",
    format: [70, 30]
  });

  const canvas = document.createElement("canvas");
  canvas.width = 500;
  canvas.height = 120;
  const ctx = canvas.getContext("2d");

  labels.forEach((lbl, i) => {
    if (i > 0) doc.addPage([70, 30], "landscape");

    ctx.clearRect(0, 0, 500, 120);
    JsBarcode(canvas, lbl.bin, {
      format: "CODE128",
      displayValue: false,
      width: 2,
      height: 70,
      margin: 0
    });

    const barcodeImg = canvas.toDataURL("image/png");

    /* LEFT SIDE – Zone */
    doc.setFont("helvetica", "bold");
    doc.setFontSize(10);
    doc.text("Zone", 4, 7);

    doc.setFontSize(22);     /* Bigger zone code */
    doc.text(lbl.zone, 4, 20);

    /* RIGHT SIDE – Bin */
    doc.setFontSize(16);     /* Bigger BIN code */
    doc.text(lbl.bin, 52, 9, { align: "center" });

    /* Barcode Area */
    doc.addImage(barcodeImg, "PNG", 26, 11, 42, 15);
  });

  doc.save("stickers_70x30_big.pdf");
}
</script>

</body>
</html>
